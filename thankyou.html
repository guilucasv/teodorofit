<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Untree.co">
	<link rel="shortcut icon" href="favicon.png">

	<meta name="description" content="" />
	<meta name="keywords" content="bootstrap, bootstrap4" />

	<!-- Bootstrap CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	<link href="css/tiny-slider.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
	<title>Teodoro Fitness</title>
</head>

<body>

	<!-- Start Header/Navigation -->
	<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

		<div class="container">
			<img src="images/logo.png" href="index.html" alt="Teodoro Fitness" class="logo-img">

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni"
				aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarsFurni">
				<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
					<li class="nav-item ">
						<a class="nav-link" href="index.html">Home</a>
					</li>
					<li><a class="nav-link" href="shop.html">Loja</a></li>
					<li><a class="nav-link" href="contact.html">Contatos</a></li>
				</ul>

				<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
					<li><a class="nav-link" href="cart.html"><img src="images/cart.svg"></a></li>
				</ul>
			</div>
		</div>

	</nav>
	<!-- End Header/Navigation -->

	<!-- Start Hero Section -->

	<!-- End Hero Section -->



	<div class="untree_co-section">
		<div class="container">
			<div class="row">
				<div class="col-md-12 text-center pt-5">
					<span class="display-3 thankyou-icon text-primary">
						<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart-check mb-5"
							fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd"
								d="M11.354 5.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8 8.293l2.646-2.647a.5.5 0 0 1 .708 0z" />
							<path fill-rule="evenodd"
								d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
						</svg>
					</span>
					<h2 class="display-3 text-black" id="status-title">Obrigado por sua compra</h2>
					<p class="lead mb-5" id="status-message">A sua compra foi finalizada. Voc√™ receber√° um e-mail com o
						comprovante da compra. Qualquer d√∫vida fale com a gente no Whatsapp</p>

					<!-- √Årea do Pix (inicialmente oculta) -->
					<div id="pix-container"
						style="display: none; margin-bottom: 30px; border: 1px solid #ddd; padding: 20px; border-radius: 10px; max-width: 500px; margin-left: auto; margin-right: auto;">
						<h3 class="text-primary">Pagamento via Pix</h3>
						<p>Escaneie o QR Code abaixo ou copie o c√≥digo para pagar:</p>

						<div class="mb-3">
							<img id="pix-qr-image" src="" alt="QR Code Pix"
								style="max-width: 250px; border: 1px solid #eee;">
						</div>

						<div class="form-group">
							<label for="pix-copypaste" class="mb-2">C√≥digo Pix Copia e Cola:</label>
							<div class="input-group mb-3">
								<input type="text" class="form-control" id="pix-copypaste" readonly>
								<button class="btn btn-outline-secondary" type="button"
									id="btn-copy-pix">Copiar</button>
							</div>
						</div>

						<div class="alert alert-warning mt-3">
							<small>O pagamento pode levar alguns minutos para ser confirmado.</small>
						</div>
					</div>

					<p><a href="shop.html" class="btn btn-sm btn-outline-black">Ver Cat√°logo</a></p>
					<br>
					<br>
					<br>
					<p><a href="https://wa.me/5562982187692" target="_blank" class="btn btn-secondary me-2">D√∫vidas?</a>
					</p>
				</div>
			</div>
		</div>
	</div>

	<script>
		document.addEventListener('DOMContentLoaded', async () => {
			// Pegar ID da transa√ß√£o da URL
			const urlParams = new URLSearchParams(window.location.search);
			const transactionId = urlParams.get('transaction');

			if (transactionId) {
				const pixContainer = document.getElementById('pix-container');
				let isPolling = true;

				// Fun√ß√£o para verificar status
				async function checkStatus() {
					if (!isPolling) return;

					try {
						// Buscar detalhes do pagamento
						const response = await fetch(`/api/payments/${transactionId}`);
						const payment = await response.json();

						console.log('Status do pagamento:', payment.status);

						if (payment.status === 'approved') {
							isPolling = false;
							// Atualizar UI para Sucesso
							pixContainer.style.display = 'none';

							const title = document.getElementById('status-title');
							const message = document.getElementById('status-message');
							const icon = document.querySelector('.thankyou-icon');

							if (title) title.innerText = 'Pagamento Aprovado!';
							if (message) message.innerHTML = 'Recebemos seu pagamento. Seu pedido est√° sendo preparado para envio.<br>Um email de confirma√ß√£o foi enviado.';
							if (icon) icon.innerHTML = '<i class="fas fa-check-circle text-success display-3"></i>';

							return;
						}

						// Se ainda pendente e for Pix, garante que mostra o QR code
						if (payment.payment_method_id === 'pix' && (payment.status === 'pending' || payment.status === 'in_process')) {
							const pixData = payment.point_of_interaction?.transaction_data;

							if (pixData && pixContainer.style.display === 'none') {
								// Mostrar container do Pix
								pixContainer.style.display = 'block';

								// Atualizar QR Code (imagem base64)
								document.getElementById('pix-qr-image').src = `data:image/png;base64,${pixData.qr_code_base64}`;

								// Atualizar Copia e Cola
								document.getElementById('pix-copypaste').value = pixData.qr_code;

								// Configurar bot√£o de copiar
								document.getElementById('btn-copy-pix').onclick = () => {
									const copyText = document.getElementById('pix-copypaste');
									copyText.select();
									document.execCommand('copy');
									alert('C√≥digo Pix copiado!');
								};

								// Atualizar textos
								document.getElementById('status-title').innerText = 'Aguardando Pagamento';
								document.getElementById('status-message').innerText = 'Realize o pagamento via Pix para finalizar seu pedido.';
							}
						}
					} catch (error) {
						console.error('Erro ao verificar status:', error);
					}

					// Agendar pr√≥xima verifica√ß√£o em 3 segundos
					if (isPolling) setTimeout(checkStatus, 3000);
				}

				// Iniciar verifica√ß√£o
				checkStatus();
			}
		});
	</script>

	<!-- Start Footer Section -->
	<footer class="footer-section">
		<div class="container relative">

			<div class="sofa-img">
				<!-- <img src="images/footer-img.png" alt="Image" class="img-fluid">  -->
			</div>

			<div class="row">
				<div class="col-lg-8">
					<div class="subscription-form">
					</div>
				</div>
			</div>

			<div class="row g-5 mb-5">
				<div class="col-lg-4">
					<div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Teodoro Fitness<span>.</span></a>
					</div>
					<p class="mb-4">Nascida do desejo de empreender, a Teodoro Fitness tem a miss√£o de levar conforto e
						qualidade premium para todas as mulheres. Criamos roupas fitness que abra√ßam o corpo, oferecendo
						a sustenta√ß√£o e a modelagem que inspiram confian√ßa. Nossas pe√ßas contam com alta tecnologia e
						design exclusivo, garantindo performance e estilo em cada treino.</p>

					<ul class="list-unstyled custom-social">
						<li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
						<li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
						<li>
							<a href="https://wa.me/5562982187692" target="_blank" rel="noopener noreferrer">
								<span class="fa fa-brands fa-whatsapp"></span>
							</a>
						</li>
					</ul>
				</div>

				<div class="col-lg-8">
					<div class="row links-wrap">
						<div class="col-6 col-sm-6 col-md-3">
							<ul class="list-unstyled">
								<li><a href="#">Sobre N√≥s</a></li>
								<li><a href="#">Produtos</a></li>
								<li><a href="#">Contatos</a></li>
							</ul>
						</div>


						<div class="col-6 col-sm-6 col-md-3">
							<ul class="list-unstyled">
								<li><a href="#">Suporte</a></li>
								<li><a href="#">Nosso Time</a></li <li><a href="#">Pol√≠tica de Privacidade</a></li>
							</ul>
						</div>

						<div class="col-6 col-sm-6 col-md-3">
							<ul class="list-unstyled">
							</ul>
						</div>
					</div>
				</div>

			</div>

			<div class="border-top copyright">
				<div class="row pt-4">
					<div class="col-lg-6">
						<p class="mb-2 text-center text-lg-start">Copyright &copy;
							<script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash;
							Designed with love by <a href="https://github.com/CodeBridge-Solutions	">CodeBridge
								Solutions</a> <!-- License information: https://untree.co/license/ -->
						</p>
					</div>

					<div class="col-lg-6 text-center text-lg-end">
						<ul class="list-unstyled d-inline-flex ms-auto">
							<li class="me-4"><a href="#">Termos & Condi√ß√µes</a></li>
							<li><a href="#">Pol√≠tica de Privacidade</a></li>
						</ul>
					</div>

				</div>
			</div>

		</div>
	</footer>
	<!-- End Footer Section -->


	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/tiny-slider.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/cart.js?v=2"></script>
	<script>
		// Limpar carrinho ao chegar na p√°gina de agradecimento
		document.addEventListener('DOMContentLoaded', () => {
			if (typeof cart !== 'undefined') {
				console.log('üßπ Limpando carrinho ap√≥s compra...');
				cart.clearCart();
			} else {
				console.warn('‚ö†Ô∏è Objeto cart n√£o encontrado. Limpando localStorage manualmente.');
				localStorage.removeItem('teodorofit_cart');
				// Atualizar badge manualmente se necess√°rio
				const badge = document.getElementById('cart-badge');
				if (badge) badge.style.display = 'none';
			}
		});
	</script>
</body>

</html>